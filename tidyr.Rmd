---
title: 'Using tidyr: A Short Demo'
author: "Shiv Sundar"
date: "May 30, 2018"
output: rmarkdown::github_document
---

```{r setup, include=FALSE}
library(tidyr)
library(dplyr)
data <- read.csv("sales.csv")
knitr::opts_chunk$set(echo = TRUE)
```

#Introduction
In this demo, we will take a look at a package called `tidyr` and its most used functions. To do this, let's assume the role of someone who is studying prices of tickets based on the state it is held in.

##Getting our relevant data
Here's what our data looks like currently:

```{r}
head(data)
```

That's a lot of data for our goal! We need to get rid of data that is unnecessary.

```{r}
newData <- data[ ,c("venue_loc", "trans_face_val_amt", "event_date_time", "timezn_nm")]
```

##separate()
The data in the column titled `event_date_time` contains repeat data from the `event_date` column. We can remove this duplicate data by using the `separate()` command to split it into two columns.

```{r}
newData <- (newData %>%
  separate(event_date_time, c("event_date", "event_time"), sep = " ") %>%
  separate(venue_loc, c("venue_city", "venue_state"), sep = ", "))

head(newData)
```

##unite()
Here, we put two columns together by using the `unite()` function. Our data originally looks like this.
```{r}
head(newData$venue_city)
head(newData$venue_state)
```

Now we combine the two columns 

```{r}
testData <- unite(newData, "venue_loc", venue_city, venue_state, sep = ", ")
head(testData$venue_loc)
```

##gather()
```{r}
testData <- gather(testData, timezn_nm, venue_loc)
testData <- select(testData, seq(ncol(testData) - 3, ncol(testData)))
head(testData)
```

##spread()

```{r}
testData <- unique(testData)
```

unite venue state and venue city then spread location against time zone

separate event time and date then gather