---
title: 'Using tidyr: A Short Demo'
author: "Shiv Sundar"
date: "May 30, 2018"
output: rmarkdown::github_document
---

```{r setup, include=FALSE}
library(tidyr)
library(dplyr)
data <- read.csv("../data/sleepData.csv")
data <- data %>%
  drop_na(vore)
data <- data %>%
  mutate("rem_ratio" = sleep_rem/sleep_total) %>%
  select(-sleep_rem) %>%
  unite("latin_name", c("genus", "order"), sep = " ", remove = TRUE)
knitr::opts_chunk$set(echo = TRUE)
```

#Introduction
In this demo, we will take a look at a package called `tidyr` and its most used functions. `tidyr` is a tool used for cleaning up data for ease of use later. 

##Getting our relevant data
Here's what our data looks like currently:

```{r}
head(data)
```

This data, while mostly organized, is not "clean". We can use the `tidyr` package to accomplish this goal.

##separate()
In this data, the `latin_name` column has data that we can split using the `separate()` function. This way, it will be easier to find out how many _genera_ fall into each diet type.
```{r}
data <- data %>%
  separate(latin_name, c("genus", "order"), sep = " ", remove = TRUE)
head(data)
```

##unite()
Here, we put two columns together by using the `unite()` function. Our data originally looks like this. 
```{r}
head(data$vore)
```

The formatting of this data isn't easy to understand. What we can do is create a column of the same  

```{r}
data$suffix = "vore"
(data <- data %>%
  unite("diet", vore, suffix, sep = "", remove = TRUE)) %>%
  head()
```

##spread()
Now, let's say that we want to find out which _genera_ fall under a type of diet. We can do this by "spreading" the _genera_ against the diet type.

```{r}
data %>%
  spread(diet, order) %>%
  select(name, ends_with("vore"))
```

##gather()
```{r}

```

